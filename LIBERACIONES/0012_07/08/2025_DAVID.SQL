-- CREATE TABLE APPMONEDEROCOMMAND.TRASPASOS(
-- UIDOPERACION VARCHAR2(36) NOT NULL,
-- UIDMONEDEROORIGEN VARCHAR2(36) NOT NULL,
-- UIDMONEDERODESTINO VARCHAR2(36) NOT NULL,
-- INUMEROTARJETAORIGEN NUMBER(16,0) NOT NULL,
-- INUMEROTARJETADESTINO NUMBER(16,0) NOT NULL,
-- DMONTO NUMBER(18,2) NOT NULL,
-- IFOLIOOPERACION NUMBER(16,0) NOT NULL,
-- DTFECHAOPERACION TIMESTAMP NOT NULL,
-- CONSTRAINT PK_TRASPASOS PRIMARY KEY (UIDOPERACION)
-- )
-- TABLESPACE DATA;

-- COMMENT ON COLUMN APPMONEDEROCOMMAND.TRASPASOS.UIDOPERACION IS 'IDENTIFICADOR ÚNICO DEL TRASPASO';
-- COMMENT ON COLUMN APPMONEDEROCOMMAND.TRASPASOS.UIDMONEDEROORIGEN IS 'IDENTIFICADOR DEL MONEDERO ORIGEN';
-- COMMENT ON COLUMN APPMONEDEROCOMMAND.TRASPASOS.UIDMONEDERODESTINO IS 'IDENTIFICADOR DEL MONEDERO DESTINO';
-- COMMENT ON COLUMN APPMONEDEROCOMMAND.TRASPASOS.INUMEROTARJETAORIGEN IS 'NÚMERO DE LA TARJETA ORIGEN';
-- COMMENT ON COLUMN APPMONEDEROCOMMAND.TRASPASOS.INUMEROTARJETADESTINO IS 'NÚMERO DE LA TARJETA DESTINO';
-- COMMENT ON COLUMN APPMONEDEROCOMMAND.TRASPASOS.DMONTO IS 'MONTO DE LA OPERACIÓN';
-- COMMENT ON COLUMN APPMONEDEROCOMMAND.TRASPASOS.IFOLIOOPERACION IS 'FOLIO DE LA OPERACIÓN';
-- COMMENT ON COLUMN APPMONEDEROCOMMAND.TRASPASOS.DTFECHAOPERACION IS 'FECHA DE LA OPERACIÓN DEL REGISTRO';

----------------------------------------------------------------------------------------------------------------
-- CREATE TABLE APPMONEDEROQUERY.TRASPASOS(
-- UIDOPERACION VARCHAR2(36) NOT NULL,
-- UIDMONEDEROORIGEN VARCHAR2(36) NOT NULL,
-- UIDMONEDERODESTINO VARCHAR2(36) NOT NULL,
-- INUMEROTARJETAORIGEN NUMBER(16,0) NOT NULL,
-- INUMEROTARJETADESTINO NUMBER(16,0) NOT NULL,
-- DMONTO NUMBER(18,2) NOT NULL,
-- IFOLIOOPERACION NUMBER(16,0) NOT NULL,
-- DTFECHAOPERACION TIMESTAMP NOT NULL,
-- CONSTRAINT PK_TRASPASOS PRIMARY KEY (UIDOPERACION)
-- )
-- TABLESPACE DATA;

-- COMMENT ON COLUMN APPMONEDEROQUERY.TRASPASOS.UIDOPERACION IS 'IDENTIFICADOR ÚNICO DEL TRASPASO';
-- COMMENT ON COLUMN APPMONEDEROQUERY.TRASPASOS.UIDMONEDEROORIGEN IS 'IDENTIFICADOR DEL MONEDERO ORIGEN';
-- COMMENT ON COLUMN APPMONEDEROQUERY.TRASPASOS.UIDMONEDERODESTINO IS 'IDENTIFICADOR DEL MONEDERO DESTINO';
-- COMMENT ON COLUMN APPMONEDEROQUERY.TRASPASOS.INUMEROTARJETAORIGEN IS 'NÚMERO DE LA TARJETA ORIGEN';
-- COMMENT ON COLUMN APPMONEDEROQUERY.TRASPASOS.INUMEROTARJETADESTINO IS 'NÚMERO DE LA TARJETA DESTINO';
-- COMMENT ON COLUMN APPMONEDEROQUERY.TRASPASOS.DMONTO IS 'MONTO DE LA OPERACIÓN';
-- COMMENT ON COLUMN APPMONEDEROQUERY.TRASPASOS.IFOLIOOPERACION IS 'FOLIO DE LA OPERACIÓN';
-- COMMENT ON COLUMN APPMONEDEROQUERY.TRASPASOS.DTFECHAOPERACION IS 'FECHA DE LA OPERACIÓN DEL REGISTRO';

----------------------------------------------------------------------------------------------------------------
-- CREATE TABLE APPMONEDEROQUERY.TIPOSTARIFA(
-- UIDTIPOTARIFA VARCHAR2(36) NOT NULL,
-- STIPOTARIFA VARCHAR2(100) NULL,
-- SCLAVETIPOTARIFA VARCHAR2(10) NULL,
-- ITIPOTARJETA NUMBER DEFAULT 0,
-- CONSTRAINT TARIFAS_PK PRIMARY KEY (UIDTIPOTARIFA)
-- )
-- TABLESPACE DATA;

-- COMMENT ON COLUMN APPMONEDEROQUERY.TIPOSTARIFA.UIDTIPOTARIFA IS 'IDENTIFICADOR ÚNICO DEL TIPO DE TARIFA';
-- COMMENT ON COLUMN APPMONEDEROQUERY.TIPOSTARIFA.STIPOTARIFA IS 'NOMBRE DEL TIPO DE TARIFA';
-- COMMENT ON COLUMN APPMONEDEROQUERY.TIPOSTARIFA.SCLAVETIPOTARIFA IS 'CLAVE DEL TIPO DE TARIFA';
-- COMMENT ON COLUMN APPMONEDEROQUERY.TIPOSTARIFA.ITIPOTARJETA IS 'INDICA EL TIPO DE TARJETA DE LA TARIFA';


-----------------------------------------------------------------------------------------------------------------

MERGE INTO APPMONEDEROQUERY.TIPOSTARIFA D
USING CATALOGOS.TIPOTARIFAS O
ON (D.UIDTIPOTARIFA = O.UIDTIPOTARIFA)
WHEN MATCHED THEN
    UPDATE SET 
        D.STIPOTARIFA = O.STIPOTARIFA,
        D.SCLAVETIPOTARIFA = O.SCLAVETIPOTARIFA,
        D.ITIPOTARJETA = O.ITIPOTARJETA
WHEN NOT MATCHED THEN
    INSERT (UIDTIPOTARIFA, STIPOTARIFA, SCLAVETIPOTARIFA, ITIPOTARJETA)
    VALUES (O.UIDTIPOTARIFA, O.STIPOTARIFA, O.SCLAVETIPOTARIFA, O.ITIPOTARJETA);

-----------------------------------------------------------------------------------------------------------------

ALTER TABLE APPMONEDEROCOMMAND.TARJETAUSUARIO ADD DTFECHACREACION TIMESTAMP NULL;
COMMENT ON COLUMN APPMONEDEROCOMMAND.TARJETAUSUARIO.DTFECHACREACION IS 'Fecha de la creación del registro.';

ALTER TABLE APPMONEDEROCOMMAND.TARJETAUSUARIO ADD DTFECHABAJA TIMESTAMP NULL;
COMMENT ON COLUMN APPMONEDEROCOMMAND.TARJETAUSUARIO.DTFECHABAJA IS 'Fecha de baja del registro.';


ALTER TABLE APPMONEDEROCOMMAND.ESTADODECUENTA ADD DTFECHAINICIOVIGENCIA TIMESTAMP NULL;
COMMENT ON COLUMN APPMONEDEROCOMMAND.ESTADODECUENTA.DTFECHAINICIOVIGENCIA IS 'Fecha inicio de la vigencia del periodo de la tarjeta.';

ALTER TABLE APPMONEDEROCOMMAND.ESTADODECUENTA ADD DTFECHAFINVIGENCIA TIMESTAMP NULL;
COMMENT ON COLUMN APPMONEDEROCOMMAND.ESTADODECUENTA.DTFECHAFINVIGENCIA IS 'Fecha fin de la vigencia del periodo de la tarjeta.';



------------------------------------------------------------------------------------------------------------------

ALTER TABLE APPMONEDEROQUERY.MOVIMIENTOSOPERACIONES ADD UIDTIPOOPERACION VARCHAR2(36) NULL;
COMMENT ON COLUMN APPMONEDEROQUERY.MOVIMIENTOSOPERACIONES.UIDTIPOOPERACION IS 'Identificador de tipo de operación.'; 

ALTER TABLE APPMONEDEROQUERY.MOVIMIENTOSOPERACIONES ADD UIDTIPOMOVIMIENTO VARCHAR2(36) NULL;
COMMENT ON COLUMN APPMONEDEROQUERY.MOVIMIENTOSOPERACIONES.UIDTIPOMOVIMIENTO IS 'Identificador de tipo de movimiento.'; 

ALTER TABLE APPMONEDEROQUERY.MOVIMIENTOSOPERACIONES ADD INUMEROTARJETAORIGEN NUMBER(16) NULL;
COMMENT ON COLUMN APPMONEDEROQUERY.MOVIMIENTOSOPERACIONES.INUMEROTARJETAORIGEN IS 'Número de la tarjeta origen del traspaso.'; 

ALTER TABLE APPMONEDEROQUERY.MOVIMIENTOSOPERACIONES ADD INUMEROTARJETADESTINO NUMBER(16) NULL;
COMMENT ON COLUMN APPMONEDEROQUERY.MOVIMIENTOSOPERACIONES.INUMEROTARJETADESTINO IS 'Número de la tarjeta destino del traspaso.'; 
--------------------------------------------------------------------------------------------------------------------


ALTER TABLE PAGOS.ORDENES ADD SESTATUS VARCHAR2(50) NULL;
COMMENT ON COLUMN PAGOS.ORDENES.SESTATUS IS 'Estatus de la orden.';

ALTER TABLE PAGOS.ORDENES ADD SFOLIO VARCHAR2(50) NULL;
COMMENT ON COLUMN PAGOS.ORDENES.SFOLIO IS 'Folio de venta.';

ALTER TABLE PAGOS.ORDENES ADD DTFECHAOPERACION TIMESTAMP NULL;
COMMENT ON COLUMN PAGOS.ORDENES.DTFECHAOPERACION IS 'Fecha de operación.';